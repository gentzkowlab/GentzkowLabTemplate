This directory contains an example that shows how to use Overleaf with GentzkowLabTemplate by creating a separate GitHub repository for your paper that syncs with Overleaf.

The workflow is designed to keep your analysis code and LaTeX paper separate while automatically syncing figures and tables from your analysis repository. For example, suppose you have an analysis repository where you produce figures that are saved in `2_analysis/output/Figures/`. You want these figures to appear in your paper repository so they can be included in your LaTeX document. The `setup/sync_inputs.sh` script will copy these figures from your analysis repository into the `input/` directory of your paper repository. Files that are not generated by your analysis (such as screenshots from elsewhere) should be placed in a `raw/` directory instead of `input/`.

See the Examples section of the [template instructions](https://github.com/gentzkow/GentzkowLabTemplate/wiki#examples) for the general procedure for using example scripts.

### List of files

* `setup/` — Folder containing the input sync configuration files.
* `setup/inputs.spec` — Specification file that declares which external files (figures, tables, etc.) should be copied from your analysis repository.
* `setup/sync_inputs.sh` — Script that syncs input files from your analysis repository into the `input/` directory.

### Steps to set up the Overleaf sync example

1. Create a new GitHub repository for your paper (e.g., `my-project-paper`).

2. Clone the repository locally:
   ```bash
   git clone https://github.com/<username>/<paper-repo-name>.git
   cd <paper-repo-name>
   ```

3. Copy the `setup/` folder from this example into your paper repository.

4. Commit the setup folder:
   ```bash
   git add setup/
   git commit -m "Add input sync setup"
   git push
   ```

5. Set up Overleaf integration:
   * Create a new project in Overleaf.
   * Select "Import from GitHub" → choose your paper repository → "Import to Overleaf".
   * For detailed instructions, see the [Overleaf documentation on GitHub integration](https://www.overleaf.com/learn/how-to/How_to_use_Git_and_GitHub_with_Overleaf).

6. Configure input file syncing by editing `setup/inputs.spec` to specify which files should be synced from your analysis repository. The format is documented in `setup/inputs.spec`.

7. Run the sync script to pull input files:
   ```bash
   ./setup/sync_inputs.sh
   ```
   This will copy specified files into the `input/` directory and generate `setup/inputs.lock` to track what was copied.

8. Commit the synced files:
   ```bash
   git add input/ setup/inputs.lock
   git commit -m "Sync input files from analysis repo"
   git push
   ```

9. Add your LaTeX files (`.tex`, `.bib`, etc.) to the repository root. These files will be synced to Overleaf automatically (see below for instructions on how to sync)

### Requirements

* If your analysis repository uses Git LFS for large files, make sure `git-lfs` is installed. See [Git LFS documentation](https://git-lfs.github.com/).

### Important notes

* **Nobody should ever edit files in the `input/` directory within Overleaf.** Files in the `input/` directory (figures, tables, etc.) are automatically synced from your analysis repository using `setup/sync_inputs.sh`. If you edit them in Overleaf, your changes will be overwritten the next time you run the sync script. 
* Before each update of `inputs.spec`, remember to run `git pull` in the terminal first, so as to always ensure the paper repository and the Overleaf project are synced.
* **When working on branches, be careful about pushing output files with the same name from different branches.** You should not try to sync files with the same filename from multiple branches (e.g., `figure.pdf` from `main` and `figure.pdf` from branch `XX`). This will cause an error. If you want to see branch-specific output in Overleaf, either give it a branch-specific name (e.g., `figure_XX.pdf`) or make sure the document with the same name is not also being pulled from `main` in your `setup/inputs.spec`.
* Edit LaTeX source files (`.tex`, `.bib`) in Overleaf, which will sync to GitHub automatically.
* Generate figures and tables in your analysis repository, then run `setup/sync_inputs.sh` in your paper repository to sync them.
* The sync script deletes the entire `input/` directory at the start to ensure all inputs are fresh. If you need to manually add files that aren't from your analysis repository (such as screenshots from elsewhere), place them in a `raw/` directory instead of `input/`.
* To add new input files, edit `setup/inputs.spec` following the format documented in that file, then run `./setup/sync_inputs.sh`.
* Remember to commit your changes after running `./setup/sync_inputs.sh`.
* Once your inputs are commited to the paper repository, navigate to Overleaf, click `Integrations`, and select `pull GitHub changes into Overleaf`. This should automatically sync your Overleaf project with the most recent commit of the paper repository

### Overleaf documentation

For more information on using Overleaf with GitHub:

* [How to use Git and GitHub with Overleaf](https://www.overleaf.com/learn/how-to/How_to_use_Git_and_GitHub_with_Overleaf)
* [Overleaf Git Support](https://www.overleaf.com/learn/how-to/Version_control_with_Git)
